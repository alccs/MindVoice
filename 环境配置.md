# MindVoice 环境配置指南

## 目录

- [方式一：API 模式（推荐）](#方式一api-模式推荐)
- [方式二：本地模型模式](#方式二本地模型模式)
- [常见问题](#常见问题)

---

## 方式一：API 模式（推荐）

**最简单！不需要 Python 环境和模型文件。**

### 1. 启动软件

双击 `MindVoice 1.0.0.exe`

### 2. 配置 API

1. 右键系统托盘图标 → 选择「打开设置」
2. 点击「API」标签页
3. 选择 API 提供商：
   - **OpenAI**：使用 Whisper API
   - **Groq**：使用 Whisper API（更快、更便宜）
4. 填入你的 API Key
5. 点击「测试连接」验证

### 3. 获取 API Key

#### OpenAI
1. 访问 https://platform.openai.com/api-keys
2. 点击「Create new secret key」
3. 复制生成的 Key

#### Groq
1. 访问 https://console.groq.com/keys
2. 点击「Create API Key」
3. 复制生成的 Key

### 4. 开始使用

1. 按 `Alt+Space` 开始录音
2. 再次按 `Alt+Space` 结束并转文字
3. 文字会自动粘贴到光标位置

---

## 方式二：本地模型模式

**需要 Python 环境和模型文件，但完全离线使用。**

### 前置要求

- 电脑上已安装 Python 环境（推荐 Anaconda）
- 已安装 PyTorch、Transformers 等依赖库

### 步骤 1：准备模型文件

将模型文件夹放到与 `MindVoice 1.0.0.exe` 同级目录：

```
任意文件夹/
├── MindVoice 1.0.0.exe
└── model/
    ├── qwen3-asr-0.6B/          # Qwen 小模型（推荐）
    │   ├── config.json
    │   ├── model.safetensors
    │   └── ...
    └── Voxtral-Mini-4B-Realtime-2602/  # Voxtral 大模型
        ├── config.json
        ├── consolidated.safetensors
        ├── tekken.json
        └── ...
```

### 步骤 2：获取 Python 路径

1. 打开你的 Python 环境（如 Anaconda Prompt）
2. 运行以下命令：
   ```powershell
   where python
   ```
   或
   ```powershell
   python -c "import sys; print(sys.executable)"
   ```
3. 复制完整的 Python 路径，例如：
   - `F:\anaconda3\envs\mindvoice-qwen\python.exe`
   - `C:\Users\你的用户名\AppData\Local\Programs\Python\Python310\python.exe`

### 步骤 3：配置软件

1. 启动 `MindVoice 1.0.0.exe`
2. 右键托盘图标 →「打开设置」
3. 点击「API」标签页
4. 选择「本地」作为 Provider
5. 在「Python Path」字段填入刚才复制的 Python 路径
6. 点击「保存」

### 步骤 4：选择模型

1. 在「API」标签页中
2. 「Local Model」选择：
   - **qwen**：小模型（约 600MB），速度快，推荐
   - **voxtral**：大模型（约 8.4GB），效果更好
3. 点击「保存」

### 步骤 5：重启软件

1. 右键托盘图标 →「退出」
2. 重新启动 `MindVoice 1.0.0.exe`
3. 等待模型加载完成（托盘提示「本地模型已就绪」）

---

## 常见问题

### Q: 提示「模型启动失败」？

**A:** 检查以下几点：

1. **Python 路径是否正确？**
   - 路径中不能有中文或空格（最好用英文路径）
   - 确认路径指向的是 `.exe` 文件，不是文件夹

2. **模型文件夹位置是否正确？**
   - `model` 文件夹必须和 `MindVoice 1.0.0.exe` 在同一目录
   - 不要把模型放到子文件夹里

3. **Python 环境是否安装了所需库？**
   - 确保环境里有 `torch`、`transformers`、`accelerate` 等库
   - 可以在命令行运行 `python -c "import torch; print(torch.__version__)"` 测试

### Q: 模型加载很慢？

**A:** 
- 首次加载需要几秒钟到几分钟（取决于模型大小）
- 后续启动会快一些
- 推荐使用 qwen3-asr-0.6B 小模型

### Q: 如何重置设置？

**A:** 删除配置文件：
1. 按 `Win+R`，输入 `%APPDATA%\mindvoice`
2. 删除 `config.json` 文件
3. 重启软件

### Q: 便携版和安装版有什么区别？

**A:**
- **便携版**：单 exe 文件，解压到临时目录运行，适合 U 盘携带
- **安装版**：安装到系统，有开始菜单快捷方式

### Q: 录音没声音？

**A:**
1. 检查 Windows 隐私设置 → 麦克风权限
2. 确认麦克风是默认设备
3. 右键托盘图标 →「打开设置」→「General」，调整 VAD Threshold（语音检测阈值）

---

## 快速测试

### 测试 API 模式
1. 选择 Groq 或 OpenAI
2. 填入 API Key
3. 点击「测试连接」
4. 按 `Alt+Space` 说「你好」

### 测试本地模型
1. 配置好 Python 路径
2. 确保 model 文件夹在同一目录
3. 重启软件
4. 查看控制台日志，确认模型路径正确

---

## 技术支持

如仍有问题，请提供以下信息：
1. 控制台日志截图
2. 你的目录结构截图
3. 使用的是 API 模式还是本地模型模式
